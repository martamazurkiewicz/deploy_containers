resources:
  repositories:
  - repository: dockerfiles
    type: github
    endpoint: martamazurkiewicz
    name: martamazurkiewicz/dockerfiles
    ref: main

parameters:
- name: purge_volumes
  displayName: Purge volumes
  type: boolean
  default: false 

trigger:
- none

jobs:

- job: build
  displayName: build
  pool: 
    name: Default
  steps:
  - checkout: self
  - checkout: dockerfiles
  - script: dir $(Build.SourcesDirectory)

- job: build_containers
  displayName: 'build containers'
  dependsOn: build
  pool:
    name: Default
  steps:
  - task: CmdLine@2
    inputs:
      script: |
        echo "List all dockerfiles"
        echo "$(Build.SourcesDirectory)"
  # - task: CmdLine@2
  #   inputs: 
  #     script: echo "##vso[task.setvariable variable=containers;]ls $(Build.SourcesDirectory)"
  # - template: build_container.yaml
  #   parameters:
  #     containers: $(containers)
